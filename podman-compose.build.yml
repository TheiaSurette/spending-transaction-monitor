services:
  # PostgreSQL Database - Build Override
  migrations:
    image: spending-monitor-db:local  # Override quay image with local tag
    build:
      context: .
      dockerfile: packages/db/Containerfile

  # FastAPI Backend - Build Override
  api:
    image: spending-monitor-api:local  # Override quay image with local tag
    build:
      context: .
      dockerfile: packages/api/Containerfile

  # React Frontend - Build Override
  ui:
    image: spending-monitor-ui:local  # Override quay image with local tag
    build:
      context: .
      dockerfile: packages/ui/Containerfile
      args:
        VITE_BYPASS_AUTH: ${VITE_BYPASS_AUTH:-false}
        VITE_API_BASE_URL: ${VITE_API_BASE_URL:-/api}
        VITE_ENVIRONMENT: ${VITE_ENVIRONMENT:-staging}


  
